env:
  # The URL of your Connections envrionment without a trailing slash. Do NOT end with `/`
  CONNECTIONS_URL: {% if cnx_setup_mt is defined | default(false) and cnx_setup_mt|bool %} "" {% else %} https://{{ frontend_fqdn }} {% endif %}
  # The path to where the addin app is being served, relative to the CONNECTIONS_URL. Do NOT start or end with `/`
  CONTEXT_ROOT: outlook-addin
  # A URL that a user can go to for support of the addin.
  SUPPORT_URL: https://help.hcltechsw.com/connections/v7/connectors/enduser/c_ms_plugins_add_in_outlook.html
  # Client ID (aka. app ID) used when registering oauth app in Connections
  CONNECTIONS_CLIENT_ID: {% if cnx_setup_mt is defined | default(false) and cnx_setup_mt|bool %} connections_social_mobile {% else %} connections-outlook-desktop {% endif %}
  # Client secret generated by Connections when registering oauth app
  CONNECTIONS_CLIENT_SECRET: {% if cnx_setup_mt is defined | default(false) and cnx_setup_mt|bool %} "" {% else %} {{ outlook_addin.stdout_lines | last }} {% endif %}
  #
  #-------------------------------------------------
  # MT variables - leave blank for on prem deployment. See README for more info
  #
  # REQUIRED FOR MT: Domain used for OpenID Connect (OIDC) authentication. Do NOT end with `/`
  AUTH_DOMAIN: {% if cnx_setup_mt is defined | default(false) and cnx_setup_mt|bool %} https://{{ mt_oidc_host }} {% else %} "" {% endif %}
  # REQUIRED FOR MT: A path (relative to AUTH_DOMAIN) used by the addin to obtain OIDC auth configuration and endpoints. This variable is required for a multi tenant environment.  Do NOT start with `/`
  AUTH_DISCOVERY_PATH: {% if cnx_setup_mt is defined | default(false) and cnx_setup_mt|bool %} {{ __outlook_mt_auth_url }} {% else %} "" {% endif %}
  # REQUIRED FOR MT: Tells the add-in what to use as the domain, or first part of, the AUTH_DISCOVERY_PATH. Possible values: "auth" (use the AUTH_DOMAIN variable) or "connections" (use the CONNECTIONS_URL as generated for the tenant). Default: "connections".
  DISCOVERY_DOMAIN: {% if cnx_setup_mt is defined | default(false) and cnx_setup_mt|bool %} connections {% else %} "" {% endif %}
  # The path to where Connections is being served relative to the tenant domain root. Note that is only required if the path to Connections differs from the actual tenant domain. e.g. https://company.collab.cloud/cnx/. Do NOT start or end with `/`. Default: ''
  CONNECTIONS_ROOT: ""
  # The top level multitentant domain without protocol.
  # This variable is used when starting the docker container to generate the manifest.xml files
  MT_DOMAIN: {% if cnx_setup_mt is defined | default(false) and cnx_setup_mt|bool %} {{ frontend_domain }} {% else %} "" {% endif %} 
  # A comma delimited string of MT tenants (subdomains)
  # This variable is used when starting the docker container to generate the manifest.xml files for each tenant
  TENANTS: {% if cnx_setup_mt is defined | default(false) and cnx_setup_mt|bool %} {{ __outlook_tenant }} {% else %} "" {% endif %}

image:
  repository: {{ docker_registry_url }}/connections
ingress:
  hosts:
{% if  __ingress_multi_domain_enabled == "true"  %}
    - host: "*.{{ load_balancer_dns.split('.', 1)[1] }}"
      paths: []
{% if  load_balancer_dns != frontend_fqdn %}
    - host: "*.{{ frontend_fqdn.split('.', 1)[1] }}"
      paths: []
{% endif %}
{% else %}
    - host: "{{ cnx_application_ingress }}"
      paths: []
{% endif %}

namespace: {{ __default_namespace }}

