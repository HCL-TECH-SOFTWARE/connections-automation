---
- name:                    Setup OS
  include_tasks:           setup_os.yml
  when:                    inventory_hostname in groups["dmgr"]

- name:                    Create Tiny Editors user for Tiny Editors installation
  include_tasks:           create_tiny_editors_user.yml

- name:                    Download TinyEditors installer to Tiny Editors env
  include_tasks:           download_tiny_editors.yml
  when:
   - __setup_environment |bool
   - inventory_hostname in groups["dmgr"]

- name:                    Install Tiny Editors
  include_tasks:           install_tiny_editors.yml
  when:
   - inventory_hostname in groups["dmgr"]

- name:                    Render Tiny Editors configurations
  include_tasks:           render_tiny_editor_configurations.yml
  when:
   - inventory_hostname in groups["cnx_was_servers"]

- name:                    Installing the TinyMCE editor service requires Common to be restarted if it is running or partially running
  include_tasks:           restart_app_common.yml
  when:
   - __install_tinyeditors |bool
   - inventory_hostname in groups["dmgr"]

- name:                    Install Tiny Editor service
  include_tasks:           install_tiny_editor_service.yml
  when:
   - __install_tinyeditors |bool
   - inventory_hostname in groups["dmgr"]
